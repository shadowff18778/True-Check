<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TrueCheck - Security Integrity Engine</title>
    <!-- Bibliothèques -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;300;400;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #030303;
            font-family: 'Inter', sans-serif;
            color: #e2e8f0;
            overflow: hidden;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* Animations de Radar */
        @keyframes radar {
            0% { transform: scale(0.8); opacity: 0.8; }
            100% { transform: scale(2.2); opacity: 0; }
        }
        .radar-ring {
            animation: radar 2s infinite cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Panneau Glassmorphism */
        .glass-panel {
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.06);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
        }

        /* Effets Néon */
        .neon-text-green { text-shadow: 0 0 10px rgba(16, 185, 129, 0.5); }
        .neon-shadow-emerald { box-shadow: 0 0 20px rgba(16, 185, 129, 0.2); }
        
        /* Transitions de pages fluides */
        .page-transition {
            animation: slideUp 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px) scale(0.97); filter: blur(5px); }
            to { opacity: 1; transform: translateY(0) scale(1); filter: blur(0); }
        }

        /* Signature animée */
        .shadow-signature {
            animation: pulseShadow 3s infinite ease-in-out;
        }
        @keyframes pulseShadow {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.05); color: #10b981; }
        }

        /* Optimisation mobile */
        input:focus { font-size: 16px !important; }
    </style>
</head>
<body oncontextmenu="return false;">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useRef } = React;

        const getHardwareInfo = () => {
            let gpu = "Generic Mobile GPU";
            try {
                const canvas = document.createElement('canvas');
                const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
                if (gl) {
                    const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
                    if (debugInfo) {
                        gpu = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);
                    }
                }
            } catch (e) {}
            return {
                ua: navigator.userAgent,
                cores: navigator.hardwareConcurrency || 8,
                res: `${window.screen.width}x${window.screen.height}`,
                gpu
            };
        };

        function App() {
            const [view, setView] = useState('home');
            const [progress, setProgress] = useState(0);
            const [logs, setLogs] = useState([]);
            const [deviceData, setDeviceData] = useState(null);
            const [verdict, setVerdict] = useState('real');
            const [imeiInput, setImeiInput] = useState('');
            const [imeiStatus, setImeiStatus] = useState('idle');

            useEffect(() => {
                if (window.lucide) window.lucide.createIcons();
            }, [view, progress, imeiStatus]);

            useEffect(() => {
                const handleKey = (e) => {
                    if ((e.metaKey || e.ctrlKey) && ['s', 'u', 'i', 'p'].includes(e.key.toLowerCase())) {
                        e.preventDefault();
                    }
                };
                window.addEventListener('keydown', handleKey);
                return () => window.removeEventListener('keydown', handleKey);
            }, []);

            const startScan = useCallback(() => {
                setView('scanning');
                setProgress(0);
                setLogs([]);
                
                const steps = [
                    { p: 15, m: "Analyse de la signature GPU..." },
                    { p: 40, m: "Calcul des cycles CPU..." },
                    { p: 70, m: "Contrôle de l'intégrité noyau..." },
                    { p: 100, m: "Finalisation du rapport..." }
                ];

                let stepIdx = 0;
                const timer = setInterval(() => {
                    if (stepIdx >= steps.length) {
                        clearInterval(timer);
                        const hw = getHardwareInfo();
                        setDeviceData(hw);
                        
                        const isIOS = /iPhone|iPad|iPod/.test(hw.ua);
                        const gpuLower = hw.gpu.toLowerCase();
                        const isFake = isIOS && (gpuLower.includes('mali') || gpuLower.includes('adreno'));
                        
                        setVerdict(isFake ? 'fake' : 'real');
                        setTimeout(() => setView('result'), 500);
                        return;
                    }

                    // Sécurité : Vérification que l'étape existe avant d'accéder à .p ou .m
                    const currentStep = steps[stepIdx];
                    if (currentStep) {
                        setProgress(currentStep.p);
                        setLogs(p => [currentStep.m, ...p].slice(0, 4));
                    }
                    
                    stepIdx++;
                }, 800);
            }, []);

            const handleImeiRedirect = () => {
                if (imeiInput.trim().length < 5) return;
                setImeiStatus('searching');
                setTimeout(() => {
                    window.open(`https://www.imei.info/?imei=${encodeURIComponent(imeiInput)}`, '_blank');
                    setImeiStatus('idle');
                }, 1200);
            };

            return (
                <div className="min-h-[100dvh] w-full flex items-center justify-center p-0 md:p-4 bg-black">
                    <div className="relative w-full h-[100dvh] md:h-[840px] md:max-w-[390px] bg-[#050505] md:rounded-[3.5rem] md:border md:border-white/10 shadow-[0_0_100px_rgba(0,0,0,1)] flex flex-col overflow-hidden">
                        
                        <div className="absolute top-0 left-0 w-full h-1/2 bg-emerald-500/[0.03] blur-[120px] pointer-events-none"></div>
                        
                        <div className="flex-1 relative z-10 flex flex-col h-full">
                            
                            {view === 'home' && (
                                <div className="flex flex-col h-full items-center justify-center p-8 page-transition">
                                    <div className="text-center mb-16">
                                        <h1 className="text-5xl font-thin tracking-tighter text-white">
                                            TRUE<span className="font-bold text-emerald-400 neon-text-green">CHECK</span>
                                        </h1>
                                        <div className="h-[1px] w-12 bg-emerald-500/30 mx-auto mt-4"></div>
                                        <p className="text-slate-600 text-[9px] tracking-[0.5em] uppercase mt-4">Security Engine v4.0</p>
                                    </div>

                                    <div className="relative cursor-pointer mb-20 group" onClick={startScan}>
                                        <div className="absolute inset-0 bg-emerald-500/10 rounded-full blur-[40px] group-hover:bg-emerald-500/20 transition-all duration-700"></div>
                                        <div className="absolute -inset-4 border border-emerald-500/20 rounded-full radar-ring"></div>
                                        <div className="absolute -inset-8 border border-emerald-500/10 rounded-full radar-ring" style={{animationDelay:'0.5s'}}></div>
                                        
                                        <button className="relative w-48 h-48 rounded-full glass-panel flex flex-col items-center justify-center border border-white/10 active:scale-90 transition-transform duration-500">
                                            <i data-lucide="shield-check" className="text-white mb-3 w-12 h-12 stroke-[1px]"></i>
                                            <span className="text-[10px] font-bold text-emerald-400 tracking-[0.2em] uppercase">Analyser</span>
                                        </button>
                                    </div>

                                    <button onClick={() => setView('imei')} className="w-full max-w-xs py-4 glass-panel rounded-2xl text-slate-400 text-[11px] font-bold tracking-widest flex items-center justify-center gap-3 border border-white/5 hover:text-white hover:bg-white/10 transition-all">
                                        <i data-lucide="globe" className="text-emerald-500 w-4 h-4"></i>
                                        VÉRIFICATION MONDIALE IMEI
                                    </button>
                                </div>
                            )}

                            {view === 'scanning' && (
                                <div className="flex flex-col h-full justify-center px-10 space-y-12 page-transition">
                                    <div className="text-center space-y-6">
                                        <div className="relative inline-block">
                                            <div className="absolute inset-0 bg-emerald-500/20 blur-2xl animate-pulse"></div>
                                            <i data-lucide="cpu" className="relative text-emerald-400 w-14 h-14 mx-auto stroke-[1px]"></i>
                                        </div>
                                        <h2 className="text-sm text-white font-bold tracking-[0.3em] uppercase">Analyse Cryptographique</h2>
                                    </div>
                                    
                                    <div className="space-y-4">
                                        <div className="h-[2px] bg-white/5 rounded-full overflow-hidden">
                                            <div className="h-full bg-emerald-500 shadow-[0_0_15px_#10b981] transition-all duration-700 ease-out" style={{ width: `${progress}%` }}></div>
                                        </div>
                                        <div className="flex justify-between text-[9px] font-mono text-emerald-500/60 uppercase tracking-widest">
                                            <span>Hardware Link</span>
                                            <span>{progress}%</span>
                                        </div>
                                    </div>

                                    <div className="h-24 font-mono text-[10px] text-slate-500 space-y-3">
                                        {logs.map((m, i) => (
                                            <div key={i} className="flex items-center gap-3 animate-in fade-in slide-in-from-left duration-500">
                                                <span className="w-1 h-1 bg-emerald-500 rounded-full shadow-[0_0_5px_#10b981]"></span>
                                                {m}
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}

                            {view === 'result' && (
                                <div className="flex flex-col h-full p-8 page-transition">
                                    <div className="flex-1 flex flex-col items-center justify-center text-center">
                                        <div className="relative mb-8">
                                            <div className={`absolute inset-0 blur-3xl opacity-20 ${verdict === 'real' ? 'bg-emerald-500' : 'bg-red-500'}`}></div>
                                            {verdict === 'real' ? (
                                                <i data-lucide="check-circle" className="relative text-emerald-400 w-24 h-24 stroke-[1px]"></i>
                                            ) : (
                                                <i data-lucide="shield-alert" className="relative text-red-500 w-24 h-24 stroke-[1px]"></i>
                                            )}
                                        </div>
                                        
                                        <h2 className={`text-3xl font-bold tracking-tighter mb-2 ${verdict === 'real' ? 'text-white neon-text-green' : 'text-red-500'}`}>
                                            {verdict === 'real' ? 'AUTHENTIQUE' : 'NON CONFORME'}
                                        </h2>
                                        <p className="text-slate-600 text-[10px] uppercase tracking-[0.3em]">Signature Validée</p>
                                    </div>

                                    <div className="glass-panel rounded-3xl p-6 space-y-5 mb-8 border-white/10">
                                        <div className="flex justify-between items-center border-b border-white/5 pb-3">
                                            <span className="text-[9px] text-slate-500 uppercase tracking-widest font-bold">Unité GPU</span>
                                            <span className="text-[10px] font-mono text-white truncate max-w-[180px]">{deviceData?.gpu}</span>
                                        </div>
                                        <div className="flex justify-between items-center border-b border-white/5 pb-3">
                                            <span className="text-[9px] text-slate-500 uppercase tracking-widest font-bold">Cœurs Logiques</span>
                                            <span className="text-[10px] font-mono text-white">{deviceData?.cores} Thread(s)</span>
                                        </div>
                                        <div className="flex justify-between items-center">
                                            <span className="text-[9px] text-slate-500 uppercase tracking-widest font-bold">Affichage</span>
                                            <span className="text-[10px] font-mono text-white">{deviceData?.res}</span>
                                        </div>
                                    </div>

                                    <div className="flex gap-4">
                                        <button onClick={() => setView('home')} className="flex-1 py-4 glass-panel rounded-2xl text-white text-[10px] font-bold uppercase tracking-widest hover:bg-white/10 transition-all">Retour</button>
                                        <button onClick={() => setView('imei')} className="flex-1 py-4 bg-emerald-500 rounded-2xl text-black text-[10px] font-bold uppercase tracking-widest neon-shadow-emerald active:scale-95 transition-all">IMEI Info</button>
                                    </div>
                                </div>
                            )}

                            {view === 'imei' && (
                                <div className="flex flex-col h-full p-8 pt-16 relative page-transition">
                                    <button onClick={() => setView('home')} className="absolute top-8 left-8 text-slate-500 hover:text-white transition-colors">
                                        <i data-lucide="arrow-left" className="w-5 h-5"></i>
                                    </button>
                                    
                                    <div className="mb-10">
                                        <h2 className="text-3xl font-light text-white leading-tight">Vérification <br/><span className="text-emerald-400 font-bold">Mondiale</span></h2>
                                        <p className="text-slate-500 text-xs mt-4 leading-relaxed">Entrez le numéro IMEI pour accéder instantanément au registre constructeur officiel.</p>
                                    </div>

                                    <div className="glass-panel p-6 rounded-[2rem] border-white/10 space-y-6">
                                        <div className="space-y-3">
                                            <label className="text-[9px] uppercase text-emerald-500/70 tracking-[0.2em] font-bold ml-1">Numéro IMEI / Série</label>
                                            <input 
                                                type="text" 
                                                value={imeiInput}
                                                onChange={(e) => setImeiInput(e.target.value.replace(/[^0-9a-zA-Z]/g, ''))}
                                                placeholder="Saisir ici..."
                                                className="w-full bg-black/60 border border-white/10 rounded-2xl p-5 text-white font-mono focus:border-emerald-500/50 focus:bg-black/80 outline-none transition-all placeholder:text-slate-800 text-sm"
                                            />
                                        </div>
                                        
                                        <button 
                                            onClick={handleImeiRedirect}
                                            className="w-full py-5 bg-emerald-500 hover:bg-emerald-400 disabled:opacity-30 rounded-2xl text-black font-bold text-xs uppercase tracking-widest transition-all flex items-center justify-center gap-3 shadow-xl shadow-emerald-500/10"
                                            disabled={imeiInput.trim().length < 5 || imeiStatus === 'searching'}
                                        >
                                            {imeiStatus === 'searching' ? (
                                                <><i data-lucide="loader-2" className="animate-spin w-4 h-4"></i> Analyse...</>
                                            ) : (
                                                <><i data-lucide="external-link" className="w-4 h-4"></i> Interroger la Base</>
                                            )}
                                        </button>
                                    </div>

                                    <div className="mt-auto pb-6 text-center">
                                        <div className="inline-flex items-center gap-2 px-4 py-2 bg-emerald-500/5 rounded-full border border-emerald-500/10">
                                            <i data-lucide="shield-check" className="text-emerald-500 w-3 h-3"></i>
                                            <span className="text-[9px] text-emerald-500/70 uppercase tracking-widest font-medium">Lien Sécurisé TLS 1.3</span>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {/* SIGNATURE : Powered by Shadow */}
                            <div className="absolute bottom-6 w-full text-center pointer-events-none">
                                <p className="text-[8px] tracking-[0.4em] uppercase text-slate-600 shadow-signature">
                                    Powered By <span className="font-bold">Shadow</span>
                                </p>
                            </div>
                        </div>

                        {/* Encoche iPhone décorative */}
                        <div className="hidden md:block absolute top-0 left-1/2 -translate-x-1/2 w-32 h-6 bg-[#050505] rounded-b-2xl border-x border-b border-white/5 z-50"></div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
